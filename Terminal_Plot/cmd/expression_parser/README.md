# 非硬编码表达式解析器

## 状态：实验性 / 不可用

这个包包含一个尝试实现的"非硬编码"递归下降解析器，用于解析数学表达式。

### 问题与限制

由于 MoonBit 的字符串处理 API 限制，这个非硬编码版本**无法真正实现**。主要问题包括：

1. **`s[i]` 返回 `String` 而不是 `Int`**：无法直接访问字符的代码点
2. **缺少 `Char` 类型**：MoonBit 没有单独的字符类型
3. **`substring` 方法已被弃用**：新的切片语法 `s[start:end]` 返回 `Result` 类型，需要复杂的错误处理
4. **递归处理字符索引非常困难**：由于字符串切片的限制，无法优雅地实现递归下降解析

### 当前实现

当前实现非常简化，仅支持：
- 获取字符串的第一个字符 (`get_char_at`)
- 基本的分片操作 (`substring`, `substring_from`)

**无法处理的表达式**：
- 任何不是以第一个字符开头的运算符
- 括号内的嵌套表达式
- 函数调用的复杂参数

### 官方文档

根据 MoonBit 官方文档 (https://docs.moonbitlang.com/zh-cn/latest/language/packages.html):
- 包名必须使用完整路径：`username/Terminal_Plot/path/to/pkg`
- 依赖在 `moon.mod.json` 中声明
- 子包的 `moon.pkg.json` 只需声明 `name` 和 `version`

### 建议

**生产环境请使用 `cmd/expression_hardcoded` 包的硬编码解析器**。

那个版本功能完整、稳定，并且支持各种复杂的数学表达式和隐式方程（如 `y^2 + x^2 = 1`）。

### 未来展望

如果 MoonBit 未来提供了更好的字符串处理 API（例如真正的 `Char` 类型、字符索引返回 `Int`、字符串切片的更友好语法），这个非硬编码解析器可以实现完整的递归下降算法。

---

**结论**：在当前 MoonBit 版本下，非硬编码的通用解析器**不可实现**。建议使用硬编码版本。
