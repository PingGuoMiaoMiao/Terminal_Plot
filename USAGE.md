# Terminal Plot 使用指南

## 基本用法

### 1. 运行默认示例（无参数）

```bash
moon run cmd/main
```

这会显示三个默认示例：
- sin(x) 函数
- x^2+1 函数
- 圆 x^2 + y^2 = 1

### 2. 绘制自定义函数

#### 基本语法
```bash
moon run cmd/main -- "函数表达式"
```

**重要提示**：
- 函数表达式需要用**引号**包裹（特别是包含括号时）
- **必须使用 `--`** 来分隔 `moon run` 的参数和程序参数
- `--` 是告诉 shell 将后面的参数传递给程序，而不是给 `moon` 命令

#### 支持的函数表达式

**基本函数**：
- `sin(x)` - 正弦函数
- `cos(x)` - 余弦函数
- `tan(x)` - 正切函数
- `atan(x)` - 反正切函数

**多项式**：
- `x` - 线性函数
- `x^2` 或 `x*x` - 二次函数
- `x^3` 或 `x*x*x` - 三次函数

**带运算符的表达式**：
- `x+1` - x 加 1
- `x-1` - x 减 1
- `2*x` 或 `x*2` - 2 倍 x
- `x/2` - x 除以 2
- `x^2+1` - x 平方加 1
- `x^2-1` - x 平方减 1
- `2*x+1` - 2x+1
- `sqrt(1-x^2)` - 用于绘制圆的上半部分

**特殊图形**：
- 圆：程序内置了 `plot_circle` 函数，绘制 x^2 + y^2 = 1

### 3. 使用示例

#### 绘制正弦函数
```bash
moon run cmd/main -- "sin(x)"
```

#### 绘制余弦函数
```bash
moon run cmd/main -- "cos(x)"
```

#### 绘制二次函数
```bash
moon run cmd/main -- "x^2"
```

#### 绘制 x^2+1
```bash
moon run cmd/main -- "x^2+1"
```

#### 绘制 2x+1
```bash
moon run cmd/main -- "2*x+1"
```

### 4. 命令行选项（当前版本限制）

**注意**：由于 MoonBit 的字符串解析限制，以下选项的完整解析功能暂时简化：

- `--xrange <min> <max>` - 设置 x 轴范围（默认: -10.0 到 10.0）
- `--width <n>` - 设置画布宽度（默认: 100）
- `--height <n>` - 设置画布高度（默认: 60）
- `--help` - 显示帮助信息

建议在当前版本中，如需自定义范围，可以直接修改代码中的默认值。

### 5. 查看帮助信息

```bash
moon run cmd/main -- --help
```

## 为什么需要 `--`？

在命令行中：
```bash
moon run cmd/main -- "sin(x)"
```

- `moon几点` - MoonBit 的构建工具
- `run` - 运行命令
- `cmd/main` - 要运行的程序路径
- `--` - **分隔符**，告诉 shell："后面的参数传给程序，不要给 moon"
- `"sin(x)"` - 这是给程序的参数

如果不加 `--`，shell 可能会把括号 `()` 解释为特殊字符，导致错误。

## 常见问题

### Q: 为什么函数表达式需要引号？
A: 因为括号 `()` 在 shell 中有特殊含义，引号可以防止 shell 解析这些字符。

### Q: 如何使用 `--xrange`？
A: 当前版本由于解析限制，建议直接修改代码中的默认值，或等待后续版本支持。

### Q: 可以绘制多个函数吗？
A: 当前版本不支持命令行绘制多个函数，但可以通过修改代码使用 `plot_multiple_functions` 函数实现。

### Q: 如何导出图形到文件？
A: 可以使用 `export_canvas_to_file` 或 `plot_and_save` 函数，需要在代码中调用。

